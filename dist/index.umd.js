(function(g){typeof define=="function"&&define.amd?define(g):g()})(function(){"use strict";if(typeof Chart<"u"){const g={id:"chartjs-sync-tooltips",afterInit(e){var r,l;const t=(l=(r=e.config.options)==null?void 0:r.plugins)==null?void 0:l.sync;if(!(t!=null&&t.enabled))return;const{group:n}=t,i=u=>{var I;const{chartId:a,syncGroup:s,xValue:f}=u.detail;if(a===e.id||s!==n)return;const y=((I=e.scales)==null?void 0:I.x)||e.scales[e.getDatasetMeta(0).xAxisID],{labels:d}=e.data;if(!y||!d||d.length===0)return;const b=typeof d[0]=="number",m=b?f:new Date(f).getTime();let w=0,E=d.length-1,v=0,x=1/0;for(;w<=E;){const o=Math.floor((w+E)/2),p=b?d[o]:new Date(d[o]).getTime(),D=Math.abs(p-m);if(D<x&&(x=D,v=o),p<m)w=o+1;else if(p>m)E=o-1;else break}const h=e.data.datasets.map((o,p)=>o.data&&v<o.data.length?{datasetIndex:p,index:v}:null).filter(Boolean);e.tooltip.setActiveElements(h,{x:y.getPixelForValue(d[v]),y:null}),e.update()},c=u=>{const{chartId:a,syncGroup:s}=u.detail;a===e.id||s!==n||(e.tooltip.setActiveElements([],{x:0,y:0}),e.update())};e._sync={group:n,handleSync:i,handleHide:c},window.addEventListener("sync-event",i),window.addEventListener("sync-hide",c)},afterDestroy(e){if(!e._sync)return;const{handleSync:t,handleHide:n}=e._sync;window.removeEventListener("sync-event",t),window.removeEventListener("sync-hide",n)},afterEvent(e,t){var a,s,f,y;const n=t.event,i=(a=e.config.options.plugins)==null?void 0:a.sync;if(!(i!=null&&i.enabled)||!e.scales)return;const c=((f=(s=e.tooltip)==null?void 0:s.getActiveElements)==null?void 0:f.call(s))||[];if(c.length===0&&!n.stop){window.dispatchEvent(new CustomEvent("sync-hide",{detail:{chartId:e.id,syncGroup:i.group}}));return}const r=(y=c[0])==null?void 0:y.index;if(typeof r!="number")return;const l=e.data.labels[r];if(l==null)return;const u=typeof l=="string"?new Date(l).getTime():l;n.stop||window.dispatchEvent(new CustomEvent("sync-event",{detail:{chartId:e.id,syncGroup:i.group,original:n,xValue:u}}))},beforeTooltipDraw(){return!0}};Chart.register(g)}});
